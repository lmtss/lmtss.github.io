怎么按照UE4封装的类来修改引擎  
# uniform buffer
## 以移动端的方向光为例  
* 在`SceneView.cpp` 中，创建了`FMobileDirectionalLightShaderParameters`结构体，并对应shader中的名字为`MobileDirectionalLight`  
* `FPersistentUniformBuffers`中，存放FMobileDirectionalLightShaderParameters，以及其他uniform buffer，位于`RendererScene.cpp`中创建，`ScenePrivate.h`声明
* `MobileShadingRenderer.cpp`中，`UpdateDirectionalLightUniformBuffers`中进行更新   
这个更新函数在`RenderMobileBasePass`和`RenderTranslucency`以及`InitViews`中都有调用
## view uniform
在`MobileBasePass.cpp`中使用
## 移动端点光
点光不是uniform buffer，看上去是对每一个物体做了点光的剔除  
在`MobileBasePassRendering.h`中`TMobileBasePass`
## 所以
添加一个新的uniform buffer后报错，uniform buffer索引不正确   
可能是缓存导致的，将新建的uniform buffer位置移到最后即可(`MobileBasePassRendering.h`中，Bind环节)  
## 传入cs
使用`SHADER_PARAMETER_STRUCT_REF`宏
# 获取常用量
## 摄像机
在Render()函数中，可以在`FViewInfo`中找到，声明在其继承的`FSceneView`类中  
shader的话，也可以传入view相关的uniform buffer。相关，`SceneView.cpp`中`SetupCommonViewUniformBufferParameters`  
# 视图模式
如何写一个视图，来渲染出一些自定义的数据，比如点灯数量  
`EngineBaseTypes.h`中`EViewModeIndex`  
看起来分为两种方式实现视图  
* `Lit_DetailLighting`细节光照，通过重载材质的漫反射和高光为常数来实现  
当选为`Lit_DetailLighting`视图时，会设置uniform buffer `View`中的`DiffuseOverrideParameter`等  
这种方式涉及的代码改动较少  
`ShowFlags.cpp`  
* 另一种则是`ShaderComplexity`这种