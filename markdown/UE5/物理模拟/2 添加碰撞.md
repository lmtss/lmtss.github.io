上周把插件迁到UE5了，所以现在变成了UE5上的物理模拟    

这次给布料添加碰撞，为了简化模型，我们只让布料和一个球体进行碰撞。因为已知是球体，所以我们就能用简单的解析式来表示，就像`SDF`一样。  

我们先来做一个离散的碰撞检测，看一下PBD是怎么说的     
>We compute the surface point $q_s$ which is closest to $p_i$ and the surface normal $n_s$ at this position. An inequality constraint with constraint function $C(p) = (p − q_s) \cdot n_s$ andstiffness $k$ = 1 is added to the list of constraints.

在当前的情况下，可以描述成: 如果一个布料的顶点进入了球体中，那么视为发生碰撞，计算距离顶点位置$p_i$最近的球体表面位置$q_s$，然后添加一个不等式约束$C(p) = (p − q_s) \cdot n_s$。


<div align=center><img src="../../../img/Physics/Collision-0.png"><div>左侧指发生碰撞，布料的顶点进入球体内部；右侧指经过校正，布料顶点移出球体，此时夹角CosTheta大于0(不等式中点乘的结果)，满足不等式约束</div></div>  

球体模型十分简单，我们可以用 $Distance < Radius$来判断是否在球体内部，而位置 $q_s$和法线也很好得出。  
所以在我们的这个简化模型中，这个约束在存储时可以简单地记录一个三维向量 $\vec{q_s}-\vec{p_i}+\vec{n_s}*coeff$，然后在计算的时候加上这个向量就好。  

